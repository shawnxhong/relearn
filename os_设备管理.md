# 计算机操作系统 - 设备管理

## 磁盘结构

- 盘面（Platter）
  - 一个磁盘有多个盘面；
- 磁道（Track）
  - 盘面上的圆形带状区域
  - 一个盘面可以有多个磁道
- 扇区（Track Sector）
  - 磁道上的一个弧段
  - 一个磁道可以有多个扇区
  - 它是最小的物理储存单位
  - 目前主要有 512 bytes 与 4 K 两种大小；
- 磁头（Head）
  - 与盘面非常接近
  - 将盘面上的磁场转换为电信号（读）
  - 将电信号转换为盘面的磁场（写）
- 制动手臂（Actuator arm）
  - 用于在磁道之间移动磁头
- 主轴（Spindle）
  - 使整个盘面转动

![](https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/014fbc4d-d873-4a12-b160-867ddaed9807.jpg)

## 磁盘调度算法

- 读写一个磁盘块的时间的影响因素有

  - 旋转时间
    - 主轴转动盘面，使得磁头移动到适当的扇区上
  - 寻道时间
    - 制动手臂移动，使得磁头移动到适当的磁道上
  - 实际的数据传输时间

- 寻道时间最长
- 磁盘调度的主要目标是 使磁盘的平均寻道时间最短

### 1. 先来先服务
> FCFS, First Come First Served

- 按照磁盘请求的顺序进行调度。

- 优点
  - 公平和简单
- 缺点
  - 未对寻道做任何优化
  - 平均寻道时间可能较长

### 2. 最短寻道时间优先
> SSTF, Shortest Seek Time First

- 优先调度 距离最近的磁道
- 优点
  - 平均寻道时间比较低
- 缺点
  - 不够公平
    - 如果新来的磁道请求 总是很近
    - 远的就会等死
    - 两端的磁道请求 更容易等死

![](https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/4e2485e4-34bd-4967-9f02-0c093b797aaa.png)

### 3. 电梯算法
> SCAN

- 电梯总是保持一个方向走 直到该方向没有请求 然后改变运行方向

- 电梯算法（扫描算法）和电梯的运行过程类似
  - 总是按一个方向来进行磁盘调度
  - 直到该方向上没有未完成的磁盘请求
  - 然后改变方向。

- 因为考虑了移动方向，因此所有的磁盘请求都会被满足，解决了 SSTF 的饥饿问题。

![](https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/271ce08f-c124-475f-b490-be44fedc6d2e.png)